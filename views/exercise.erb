<%= erb :"common/nav" %>
<link rel="stylesheet" href="../styles/style.css">
<script>
    var lastRepCount = ""
    var lastWeightCount = ""
    var filter = "<%=@filter_type%>"
</script>
<body>
    <main>
        <div id="spacer">
            <h1>
                <%= @workoutName %>&nbsp&nbsp
                <a class="button" id="backButton" href="/workouts">Head Back</a>
            </h1>
            <p>Filter by: <a href="/workouts/exercise?id=<%=@id%>&filter=recent">Recent</a> - <a href="/workouts/exercise?id=<%=@id%>&filter=all">All</a></p>
            <table id="exerciseInfo">
                    <tr>
                        <th>Reps</th>
                        <th>Weight (<%=
                        if @unit != ""
                            @unit
                        else
                            "kg"
                        end
                        %>)</th>
                        <th>Time</th>
                        <th>Date</th>
                    </tr>
                    <%
                    x = 0
                    @target.reverse_each do |workout| %>
                    <tr id="set<%= x %>">
                      <td><%= workout[:Reps] %></td>
                      <td><%= workout[:Weight].to_s %></td>
                      <td><%= workout[:Time] %></td>
                      <td><%= workout[:Date] %></td>
                      <td><button class="editButton" style="border-radius: 0.5em"><a style="text-decoration: none" href="/edit-set?id=<%=workout[:SetID]%>&exid=<%=workout[:ExID]%>">&#x270E</a></button></td>
                    </tr>
                    <script>
                        lastRepCount = "<%=workout[:Reps]%>"
                        lastWeightCount = "<%=workout[:Weight]%>"
                        lastTime = "<%=workout[:Time]%>"
                        lastDate = "<%=workout[:Date]%>"
                    </script>
                    <%
                    x += 1
                    end%>
            </table>
            <h3 id="noWorkoutText"><em><br>No Sets Logged Today Yet</em><br><br></h3>
            <h2><span id="restTime"></span></h2>
            <p>Add New Set</p>
            <table>
                    <tr>
                        <th>Reps</th>
                        <th>Weight (<%=
                            if @unit != ""
                                @unit
                            else
                                "kg"
                            end
                            %>)
                        </th>
                    </tr>
                    <tr id="editRow">
                        <form action="/workouts/exercise?id=<%=@id%>&filter=<%=@filter_type.downcase%>" method="post">
                            <td><input type="number" id="reps" name="Reps" required></td>
                            <td><input type="number" step="0.5" id="weight" name="Weight" required></td>
                    </tr>
                    <td  colspan=100%><input id="buttonTD" type="submit" class="button" value="Add"></td>
            </table>
            </form>
        </div>
        <br><br><br><br><br><br>
    </main>
</body>

<%= erb :"common/footer" %>
<script type="text/javascript" src="../scripts/exercise.js"></script>

</html>

