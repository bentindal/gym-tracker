.container.mt-4
  .card
    .card-header
      %h5.mb-0
        %i.fa-solid.fa-robot.text-primary
        AI Workout Analysis
    .card-body
      - if @analysis
        .analysis-stats.mb-4
          .row
            .col-md-3
              .stat-card
                %h6.text-muted Total Volume
                %h4= number_to_human(@analysis.total_volume, precision: 2) + " kg"
            .col-md-3
              .stat-card
                %h6.text-muted Total Sets
                %h4= @analysis.total_sets
            .col-md-3
              .stat-card
                %h6.text-muted Total Reps
                %h4= @analysis.total_reps
            .col-md-3
              .stat-card
                %h6.text-muted Avg Weight
                %h4= number_to_human(@analysis.average_weight, precision: 2) + " kg"
        
        .analysis-content
          = simple_format(@analysis.feedback)
      - else
        .text-center.py-4
          .spinner-border.text-primary{role: "status"}
            %span.visually-hidden Loading...
          %p.mt-3 Analyzing your workout...

  .mt-3
    = link_to "Back to Workout", workout_view_path(id: params[:workout_id]), class: "btn btn-outline-secondary" 