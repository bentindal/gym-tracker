.container
    %h1.text-center
        My Feed
    
    .text-center.m-2
        - if params[:filter] == "you"
            %a.btn.btn-outline-primary.btn-sm{href: "/feed"} You + Friends
            %a.btn.btn-primary.btn-sm{href: "/feed?filter=you"} You
        - else
            %a.btn.btn-primary.btn-sm{href: "/feed"} You + Friends
            %a.btn.btn-outline-primary.btn-sm{href: "/feed?filter=you"} You
    %hr
    - prevDate = nil
    - if @feed.length == 0
        .text-muted.text-center
            No workouts logged yet
    
    - @feed.each do |day|
        %h4
            %strong
                - if current_user == day[1]
                    %a.badge.badge-warning.badge-pill{href: "/users/view?id=#{day[1].id}"}
                        = "You"
                - else
                    %a.badge.badge-secondary.badge-pill{href: "/users/view?id=#{day[1].id}"}
                        = day[1].first_name + " " + day[1].last_name # "@" + day[1].username
                
                - if day[3].first == "Chest"
                    %a.badge.badge-primary.text-white
                        - if day[3].length == 1
                            = day[3].first
                        - elsif day[3].length == 2
                            = day[3].first + " & " + day[3].last
                        - else
                            - day[3].each do |ex|
                                - if ex == day[3].last
                                    = ex
                                - elsif ex != day[3][day[3].length - 2]
                                    = ex + ", "
                                - else
                                    = ex + " & "
                - elsif day[3].first == "Back"
                    %a.badge.badge-danger.text-white
                        - if day[3].length == 1
                            = day[3].first
                        - elsif day[3].length == 2
                            = day[3].first + " & " + day[3].last
                        - else
                            - day[3].each do |ex|
                                - if ex == day[3].last
                                    = ex
                                - elsif ex != day[3][day[3].length - 2]
                                    = ex + ", "
                                - else
                                    = ex + " & "
                - elsif day[3].first == "Legs"
                    %a.badge.badge-success.text-white
                        - if day[3].length == 1
                            = day[3].first
                        - elsif day[3].length == 2
                            = day[3].first + " & " + day[3].last
                        - else
                            - day[3].each do |ex|
                                - if ex == day[3].last
                                    = ex
                                - elsif ex != day[3][day[3].length - 2]
                                    = ex + ", "
                                - else
                                    = ex + " & "
                - else
                    %a.badge.badge-info.text-white
                        - if day[3].length == 1
                            = day[3].first
                        - elsif day[3].length == 2
                            = day[3].first + " & " + day[3].last
                        - else
                            - day[3].each do |ex|
                                - if ex == day[3].last
                                    = ex
                                - elsif ex != day[3][day[3].length - 2]
                                    = ex + ", "
                                - else
                                    = ex + " & "

        %h6.text-muted
            = day[0].strftime("%B %d, %Y") + " @ "
            // 24 hour time
            = day[0].strftime("%H:%M")
        .row
            %table
                - day[2].each do |ex|
                    %ti.col-6.col-lg-3.col-md-4.col-sm-6.col-xs-12.mb-1
                        - if ex[0] != "n/a"
                            %strong
                                = ex[0].name
                            - ex[1].each do |set|
                                - if set.weight == nil && set.repetitions == nil
                                    - msg = '? x ?'
                                - elsif set.weight == nil
                                    - msg = '? x ' + set.repetitions.to_s
                                - elsif set.repetitions == nil
                                    - msg = set.weight.to_s + ' ' + set.exercise.unit.to_s + ' x ' + '?'
                                - elsif set.weight == 0
                                    - msg = 'BW x ' + set.repetitions.to_s
                                - else
                                    - msg = set.weight.to_s + ' ' + set.exercise.unit.to_s + ' x ' + set.repetitions.to_s
                                    
                                %br

                                - if set.isFailure
                                    %span.text-danger.border-bottom.border-danger
                                        = msg
                                - elsif set.isDropset
                                    %span.text-info.border-bottom.border-info
                                        = msg
                                - else
                                    %span.text-muted
                                        = msg
                                
                                            

                                    

                    
        %hr
            
