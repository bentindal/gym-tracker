.container.text-center
    - unassigned_sets ||= Allset.where(user_id: current_user.id, belongs_to_workout: nil).where('created_at >= ?', Time.current.beginning_of_day).group_by(&:exercise)
    - if unassigned_sets.any?
        %h4.text-center.font-weight-light.mb-3
            %strong
                Current Workout
        - @time_elapsed_in_seconds = (Time.now - unassigned_sets.first[1].first.created_at)
        - @time_elapsed = Time.at(@time_elapsed_in_seconds)
        .text-center.mb-2{"data-controller": "workout-timer"}
            %strong Time Elapsed
            #timer.ml-1{"data-workout-timer-target": "display", "data-start-time": unassigned_sets.first[1].first.created_at.iso8601} #{@time_elapsed.strftime("%H:%M:%S")}

        - unassigned_sets.each do |item|
            %table.table.table-sm.border.bg-white.m-auto
                %thead.text-white.font-weight-bold{class: "bg-#{item[0].group_colour}"}
                    %tr
                        %td
                            %a.text-decoration-none.text-white{href: "/allset/"+item[0].id.to_s}
                                = item[0].name
                %tbody
                    - item[1].each do |set|
                        %tr
                            %td.small
                                = "#{set.weight} #{item[0].unit} x #{set.repetitions}"
            = link_to 'View', allset_path(item[0]), {class: "btn w-100 border-top-0 mb-3 font-weight-light"}
        %br
          
        = link_to 'New Exercise', "/exercises", {class: "btn btn-primary btn-lg w-75 mb-3 font-weight-bold"}
        %br
        = link_to 'Finish Workout', "/workout/finish", {class: "btn btn-outline-danger w-50 mb-2 font-weight-bold"}
    - else
        .container.py-5
            %h3.mt-3 No Workout in Progress
            %p.text-muted Click on the button below to start your first exercise
            = link_to 'Begin your Workout', "/exercises", {class: "btn btn-secondary"}
